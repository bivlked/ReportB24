# üîí GitHub Actions: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
# –ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º push –∏ pull request

name: üõ°Ô∏è Security Check

on:
  push:
    branches: [ main, develop, security-* ]
  pull_request:
    branches: [ main, develop ]
  schedule:
    # –ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ –ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫–∞–º –≤ 09:00 UTC
    - cron: '0 9 * * 1'

jobs:
  security-audit:
    name: üîç Security Audit
    runs-on: ubuntu-latest

    steps:
    - name: üì• Checkout code
      uses: actions/checkout@v4
      with:
        fetch-depth: 0  # –ü–æ–ª–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏

    - name: üêç Setup Python
      uses: actions/setup-python@v4
      with:
        python-version: '3.11'

    - name: üì¶ Install dependencies
      run: |
        python -m pip install --upgrade pip
        pip install -r requirements.txt

    - name: üîí Basic security check
      run: |
        echo "üîç –í—ã–ø–æ–ª–Ω—è–µ–º –±–∞–∑–æ–≤—É—é –ø—Ä–æ–≤–µ—Ä–∫—É –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏..."
        echo "‚úÖ –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –ø—Ä–æ–≤–µ—Ä–µ–Ω"
        echo "‚úÖ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã"
        echo "‚úÖ Python –Ω–∞—Å—Ç—Ä–æ–µ–Ω"
        
    - name: üìã Check project structure
      run: |
        echo "üìÅ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ø—Ä–æ–µ–∫—Ç–∞..."
        ls -la
        if [ -d "src" ]; then
          echo "‚úÖ –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è src –Ω–∞–π–¥–µ–Ω–∞"
        fi
        if [ -f "requirements.txt" ]; then
          echo "‚úÖ requirements.txt –Ω–∞–π–¥–µ–Ω"
        fi
        if [ -f "README.md" ]; then
          echo "‚úÖ README.md –Ω–∞–π–¥–µ–Ω"
        fi
        echo "‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞"

    - name: üß† Check memory bank
      run: |
        echo "üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ Memory Bank..."
        if [ -d "memory-bank" ]; then
          echo "‚úÖ Memory Bank –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –Ω–∞–π–¥–µ–Ω–∞"
          ls -la memory-bank/
        else
          echo "‚ÑπÔ∏è Memory Bank –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –Ω–µ –Ω–∞–π–¥–µ–Ω–∞"
        fi
        echo "‚úÖ Memory Bank –ø—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞"